{"version":3,"sources":["app/initialize.js","app/main.js"],"names":["document","addEventListener","require","L","lat","lon","map","setView","tileLayer","attribution","subdomains","maxZoom","addTo","baseUrl","httpsProxy","window","fetch","then","data","json","locs","list","forEach","location","colour","bikes","bikeMarker","AwesomeMarkers","icon","prefix","markerColor","marker","bindPopup","name","spaces","catch","err","console","error"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAAA,SAASC,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM;AAClDC,UAAQ,QAAR;AACD,CAFD;;;;;;ACAA,IAAMC,IAAID,QAAQ,SAAR,CAAV;AACAA,QAAQ,cAAR,E,CAAwB;AACxBA,QAAQ,iCAAR,E,CAA2C;AAC3C,IAAME,MAAM,OAAZ;AACA,IAAMC,MAAM,OAAZ;AACA,IAAMC,MAAMH,EAAEG,GAAF,CAAM,WAAN,EAAmBC,OAAnB,CAA2B,CAACH,GAAD,EAAMC,GAAN,CAA3B,EAAuC,EAAvC,CAAZ;;AAEAF,EAAEK,SAAF,CAAY,4DAAZ,EAA0E;AACxEC,eAAa,wIAD2D;AAExEC,cAAY,MAF4D;AAGxEC,WAAS;AAH+D,CAA1E,EAIGC,KAJH,CAISN,GAJT;;AAMA,IAAIO,UAAU,iFAAd;AACA,IAAIC,aAAa,yBAAjB;;AAEAC,OAAOC,KAAP,CAAaF,aAAaD,OAA1B,EACGI,IADH,CACQ,UAACC,IAAD;AAAA,SAAUA,KAAKC,IAAL,EAAV;AAAA,CADR,EAEGF,IAFH,CAEQ,UAACC,IAAD,EAAU;AACd,MAAME,OAAOF,KAAKA,IAAL,CAAUG,IAAvB;AACAD,OAAKE,OAAL,CAAa,UAACC,QAAD,EAAc;AACzB,QAAIC,SAAS,KAAb;;AAEA,QAAID,SAASE,KAAT,GAAiB,CAArB,EAAwB;AACtBD,eAAS,OAAT;AACD,KAFD,MAEO,IAAID,SAASE,KAAT,GAAiB,CAArB,EAAwB;AAC7BD,eAAS,QAAT;AACD;;AAED,QAAIE,aAAavB,EAAEwB,cAAF,CAAiBC,IAAjB,CAAsB;AACrCA,YAAM,SAD+B;AAErCC,cAAQ,IAF6B;AAGrCC,mBAAaN;AAHwB,KAAtB,CAAjB;AAKA,QAAIO,SAAS5B,EAAE4B,MAAF,CAAS,CAACR,SAASnB,GAAV,EAAemB,SAASlB,GAAxB,CAAT,EAAuC,EAACuB,MAAMF,UAAP,EAAvC,EAA2Dd,KAA3D,CAAiEN,GAAjE,CAAb;AACAyB,WAAOC,SAAP,CAAiB,SAAST,SAASU,IAAlB,GAAyB,wGAAzB,GAAoIV,SAASnB,GAA7I,GAAmJ,GAAnJ,GAAyJmB,SAASlB,GAAlK,GAAwK,0HAAxK,GAAqSkB,SAASE,KAA9S,GAAsT,mCAAtT,GAA4VF,SAASW,MAAtX;AACD,GAhBD;AAiBD,CArBH,EAsBGC,KAtBH,CAsBS,UAACC,GAAD,EAAS;AACdC,UAAQC,KAAR,CAAcF,GAAd;AACD,CAxBH","file":"public/js/app.js","sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n  require('./main')\n})\n","const L = require('leaflet')\nrequire('whatwg-fetch') // Monkey-patch global environment with fetch\nrequire('drmonty-leaflet-awesome-markers') // Monkey-patch Leaflet\nconst lat = 47.4979\nconst lon = 19.0402\nconst map = L.map('mapcanvas').setView([lat, lon], 15)\n\nL.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {\n  attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> &copy; <a href=\"http://cartodb.com/attributions\">CartoDB</a>',\n  subdomains: 'abcd',\n  maxZoom: 19\n}).addTo(map)\n\nlet baseUrl = 'http://futar.bkk.hu/bkk-utvonaltervezo-api/ws/otp/api/where/bicycle-rental.json'\nlet httpsProxy = 'https://crossorigin.me/'\n\nwindow.fetch(httpsProxy + baseUrl)\n  .then((data) => data.json())\n  .then((data) => {\n    const locs = data.data.list\n    locs.forEach((location) => {\n      let colour = 'red'\n\n      if (location.bikes > 3) {\n        colour = 'green'\n      } else if (location.bikes > 1) {\n        colour = 'yellow'\n      }\n\n      let bikeMarker = L.AwesomeMarkers.icon({\n        icon: 'bicycle',\n        prefix: 'fa',\n        markerColor: colour\n      })\n      let marker = L.marker([location.lat, location.lon], {icon: bikeMarker}).addTo(map)\n      marker.bindPopup('<h1>' + location.name + '</h1><div style=\"float: right\" id=\"directions\"><a href=\"https://maps.google.com/maps?saddr=here&daddr=' + location.lat + ',' + location.lon + '&dirflg=w\" target=\"_blank\"><i class=\"fa fa-location-arrow\" aria-hidden=\"true\"></i></a></div><strong>Available:</strong> ' + location.bikes + '<br /><strong>Capacity:</strong> ' + location.spaces)\n    })\n  })\n  .catch((err) => {\n    console.error(err)\n  })\n"]}