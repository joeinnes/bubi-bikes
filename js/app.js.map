{"version":3,"sources":["app/initialize.js","app/main.js"],"names":["document","addEventListener","require","L","lat","lon","map","setView","tileLayer","attribution","subdomains","maxZoom","addTo","baseUrl","httpsProxy","window","fetch","then","data","json","locs","list","forEach","location","colour","bikes","bikeMarker","AwesomeMarkers","icon","prefix","markerColor","marker","bindPopup","name","spaces","err","console","error"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAAA,QAAQ,CAACC,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM;AAClDC,SAAO,CAAC,QAAD,CAAP;AACD,CAFD;;;;;;ACAA,IAAMC,CAAC,GAAGD,OAAO,CAAC,SAAD,CAAjB;;AACAA,OAAO,CAAC,cAAD,CAAP,C,CAAwB;;;AACxBA,OAAO,CAAC,iCAAD,CAAP,C,CAA2C;;;AAC3C,IAAME,GAAG,GAAG,OAAZ;AACA,IAAMC,GAAG,GAAG,OAAZ;AACA,IAAMC,GAAG,GAAGH,CAAC,CAACG,GAAF,CAAM,WAAN,EAAmBC,OAAnB,CAA2B,CAACH,GAAD,EAAMC,GAAN,CAA3B,EAAuC,EAAvC,CAAZ;AAEAF,CAAC,CAACK,SAAF,CAAY,4DAAZ,EAA0E;AACxEC,aAAW,EAAE,wIAD2D;AAExEC,YAAU,EAAE,MAF4D;AAGxEC,SAAO,EAAE;AAH+D,CAA1E,EAIGC,KAJH,CAISN,GAJT;AAMA,IAAIO,OAAO,GAAG,wEAAd;AACA,IAAIC,UAAU,GAAG,sCAAjB;AAEAC,MAAM,CAACC,KAAP,CAAaF,UAAU,GAAGD,OAA1B,EACGI,IADH,CACQ,UAACC,IAAD;AAAA,SAAUA,IAAI,CAACC,IAAL,EAAV;AAAA,CADR,EAEGF,IAFH,CAEQ,UAACC,IAAD,EAAU;AACd,MAAME,IAAI,GAAGF,IAAI,CAACA,IAAL,CAAUG,IAAvB;AACAD,MAAI,CAACE,OAAL,CAAa,UAACC,QAAD,EAAc;AACzB,QAAIC,MAAM,GAAG,KAAb;;AAEA,QAAID,QAAQ,CAACE,KAAT,GAAiB,CAArB,EAAwB;AACtBD,YAAM,GAAG,OAAT;AACD,KAFD,MAEO,IAAID,QAAQ,CAACE,KAAT,GAAiB,CAArB,EAAwB;AAC7BD,YAAM,GAAG,QAAT;AACD;;AAED,QAAIE,UAAU,GAAGvB,CAAC,CAACwB,cAAF,CAAiBC,IAAjB,CAAsB;AACrCA,UAAI,EAAE,SAD+B;AAErCC,YAAM,EAAE,IAF6B;AAGrCC,iBAAW,EAAEN;AAHwB,KAAtB,CAAjB;AAKA,QAAIO,MAAM,GAAG5B,CAAC,CAAC4B,MAAF,CAAS,CAACR,QAAQ,CAACnB,GAAV,EAAemB,QAAQ,CAAClB,GAAxB,CAAT,EAAuC;AAACuB,UAAI,EAAEF;AAAP,KAAvC,EAA2Dd,KAA3D,CAAiEN,GAAjE,CAAb;AACAyB,UAAM,CAACC,SAAP,CAAiB,SAAST,QAAQ,CAACU,IAAlB,GAAyB,wGAAzB,GAAoIV,QAAQ,CAACnB,GAA7I,GAAmJ,GAAnJ,GAAyJmB,QAAQ,CAAClB,GAAlK,GAAwK,0HAAxK,GAAqSkB,QAAQ,CAACE,KAA9S,GAAsT,mCAAtT,GAA4VF,QAAQ,CAACW,MAAtX;AACD,GAhBD;AAiBD,CArBH,WAsBS,UAACC,GAAD,EAAS;AACdC,SAAO,CAACC,KAAR,CAAcF,GAAd;AACD,CAxBH","file":"public/js/app.js","sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n  require('./main')\n})\n","const L = require('leaflet')\nrequire('whatwg-fetch') // Monkey-patch global environment with fetch\nrequire('drmonty-leaflet-awesome-markers') // Monkey-patch Leaflet\nconst lat = 47.4979\nconst lon = 19.0402\nconst map = L.map('mapcanvas').setView([lat, lon], 15)\n\nL.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {\n  attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> &copy; <a href=\"http://cartodb.com/attributions\">CartoDB</a>',\n  subdomains: 'abcd',\n  maxZoom: 19\n}).addTo(map)\n\nlet baseUrl = 'https://futar.bkk.hu/api/query/v1/ws/otp/api/where/bicycle-rental.json'\nlet httpsProxy = 'https://cors-anywhere.herokuapp.com/'\n\nwindow.fetch(httpsProxy + baseUrl)\n  .then((data) => data.json())\n  .then((data) => {\n    const locs = data.data.list\n    locs.forEach((location) => {\n      let colour = 'red'\n\n      if (location.bikes > 3) {\n        colour = 'green'\n      } else if (location.bikes > 1) {\n        colour = 'yellow'\n      }\n\n      let bikeMarker = L.AwesomeMarkers.icon({\n        icon: 'bicycle',\n        prefix: 'fa',\n        markerColor: colour\n      })\n      let marker = L.marker([location.lat, location.lon], {icon: bikeMarker}).addTo(map)\n      marker.bindPopup('<h1>' + location.name + '</h1><div style=\"float: right\" id=\"directions\"><a href=\"https://maps.google.com/maps?saddr=here&daddr=' + location.lat + ',' + location.lon + '&dirflg=w\" target=\"_blank\"><i class=\"fa fa-location-arrow\" aria-hidden=\"true\"></i></a></div><strong>Available:</strong> ' + location.bikes + '<br /><strong>Capacity:</strong> ' + location.spaces)\n    })\n  })\n  .catch((err) => {\n    console.error(err)\n  })\n"]}